(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{208:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,5795,23)),Promise.resolve().then(a.t.bind(a,9497,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,2717)),Promise.resolve().then(a.bind(a,3014)),Promise.resolve().then(a.bind(a,8455))},347:()=>{},2383:()=>{},2717:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(5155);a(2115);var l=a(6874),n=a.n(l),r=a(5695);let i=[{id:1,name:"Dashboard",path:"/"},{id:2,name:"History",path:"/history/"}],c=()=>{let e=(0,r.usePathname)();return(0,s.jsx)("div",{className:"shadow-sm shadow-[#f2f3f4]",children:(0,s.jsxs)("div",{className:"flex justify-between items-center   w-full bg-white py-3 px-8",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2 w-full ",children:i.map(t=>(0,s.jsx)(n(),{href:t.path,className:"",children:(0,s.jsx)("span",{className:"px-2\n                  ".concat(e===t.path?"text-sm font-medium text-[#1e7be7] cursor-pointer  border-b-3 border-[#1e7be7] py-4.5":"text-sm font-medium text-black cursor-pointer py-4","\n                "),children:t.name})},t.id))}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 mr-4 ",children:[(0,s.jsx)("p",{className:"font-light text-sm ",children:"Notifications"})," ",(0,s.jsx)("img",{className:"size-8 rounded-full",src:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",alt:""})]})]})})}},3014:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var s=a(5155),l=a(9911),n=a(8455);let r=()=>{let{selectedFile:e,proccesingState:t,files:a,handleFileChange:r,handleFileSelect:i,handleDrop:c,handleRemoveFile:o}=(0,n.A)(),m=e=>{if(!e||!e.name)return(0,s.jsx)(l.t69,{className:"text-gray-400 text-lg"});let t=e.type||"",a=e.name.toLowerCase();return"text/csv"===t||a.endsWith(".csv")?(0,s.jsx)(l.QaY,{className:"text-green-400 text-lg"}):t.includes("spreadsheet")||a.endsWith(".xls")||a.endsWith(".xlsx")?(0,s.jsx)(l.Ru,{className:"text-green-500 text-lg"}):(0,s.jsx)(l.t69,{className:"text-gray-400 text-lg"})};return(0,s.jsxs)("div",{className:"bg-[#20263e] max-w-[300px] w-full min-h-screen",children:[(0,s.jsx)("div",{className:"py-3 px-6 border-b border-[#2d345d]",children:(0,s.jsx)("img",{src:"/jupyterlab/default/proxy/8000/logo.png",alt:"Logo"})}),(0,s.jsxs)("div",{className:"py-6 px-6",children:[(0,s.jsx)("h1",{className:"font-[500] text-lg text-white",children:"UPLOAD DATA"}),(0,s.jsx)("p",{className:"text-xs py-1 text-[#a6a6a6]",children:"Upload documents you want to summarize"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 justify-center items-center border border-[#3faaeb]/60 rounded-lg mt-4 border-dashed px-4 py-12 ".concat(t?"cursor-not-allowed":" cursor-pointer"," "),onClick:()=>document.getElementById("fileInput").click(),onDragOver:e=>e.preventDefault(),onDrop:c,children:[(0,s.jsx)("input",{type:"file",id:"fileInput",className:"hidden",disabled:t,multiple:!0,accept:".csv, .xls, .xlsx",onChange:r}),(0,s.jsx)("svg",{fill:"#505b7e",height:"40px",width:"40px",viewBox:"0 0 374.116 374.116",xmlns:"http://www.w3.org/2000/svg",className:"mb-6",children:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M344.058,207.506c-16.568,0-30,13.432-30,30v76.609h-254v-76.609c0-16.568-13.432-30-30-30s-30,13.432-30,30v106.609c0,16.568,13.432,30,30,30h314c16.568,0,30-13.432,30-30V237.506C374.058,220.938,360.626,207.506,344.058,207.506z"}),(0,s.jsx)("path",{d:"M123.57,135.915l33.488-33.488v111.775c0,16.568,13.432,30,30,30c16.568,0,30-13.432,30-30V102.426l33.488,33.488 c5.857,5.858,13.535,8.787,21.213,8.787c7.678,0,15.355-2.929,21.213-8.787c11.716-11.716,11.716-30.71,0-42.426L208.271,8.788 c-11.715-11.717-30.711-11.717-42.426,0L81.144,93.489c-11.716,11.716-11.716,30.71,0,42.426 C92.859,147.631,111.855,147.631,123.57,135.915z"})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,s.jsx)("p",{className:"text-xs text-white",children:"Drag and drop files here"}),(0,s.jsx)("p",{className:"text-white py-1 text-sm",children:"-OR-"}),(0,s.jsx)("button",{className:"py-2 px-3 rounded-md text-white text-xs font-bold bg-gradient-to-r from-[#046dfd] via-blue-400 to-[#3cace6] ".concat(t?"cursor-not-allowed":" cursor-pointer"," "),onClick:e=>{e.stopPropagation(),document.getElementById("fileInput").click()},children:"Browse Files"})]})]}),a.length>0&&(0,s.jsxs)("div",{className:"mt-6 bg-[#303751] rounded-lg min-h-[200px] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-white text-sm font-semibold px-3 py-2",children:"FILES"}),(0,s.jsx)("hr",{className:"border-1 border-[#3faaeb]/30 mb-2"}),(0,s.jsx)("ul",{className:'"text-white text-xs space-y-2 '.concat(t?"cursor-not-allowed":" cursor-pointer"),children:a.map((a,n)=>(0,s.jsxs)("li",{className:"flex items-center justify-between py-2 rounded-md px-2 relative  ".concat((null==e?void 0:e.name)===a.name?"bg-[#2d345d]":"","  ").concat(t?"cursor-not-allowed":" cursor-pointer"),onClick:()=>{t||i(a)},children:[(0,s.jsxs)("div",{className:"flex items-center".concat(t?"cursor-not-allowed":" cursor-pointer"),children:[m(a),(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsx)("p",{className:"text-[12px] truncate text-white",children:a.name}),(0,s.jsxs)("p",{className:"text-[11px] text-white",children:[(a.size/1024).toFixed(2)," KB"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(null==e?void 0:e.name)===a.name&&(0,s.jsx)(l.CMH,{className:"text-green-400 text-lg mr-2"}),(0,s.jsx)("button",{className:"text-red-400  text-lg ".concat(t?"cursor-not-allowed":" cursor-pointer"),disabled:t,onClick:e=>{e.stopPropagation(),o(a)},children:"\xd7"})]})]},n))})]})]})]})]})}},3686:()=>{},8455:(e,t,a)=>{"use strict";a.d(t,{A:()=>m,MainProvider:()=>o});var s=a(5155),l=a(2115),n=a(408),r=a.n(n),i=a(3925);let c=(0,l.createContext)(),o=e=>{let{children:t}=e,[a,n]=(0,l.useState)([]),[o,m]=(0,l.useState)(null),[d,p]=(0,l.useState)([]),[x,u]=(0,l.useState)(!1),[h,f]=(0,l.useState)([]),b=["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],g=e=>new Promise(t=>{let a=new FileReader;a.onload=a=>{let{target:s}=a,l=[];if("text/csv"===e.type)r().parse(s.result,{header:!0,skipEmptyLines:!0,complete:e=>{t(e.data.map(e=>({...e,status:"Pending",summary:""})))}});else if("application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type){let e=i.LF(s.result,{type:"binary"}),a=e.SheetNames[0],l=e.Sheets[a],n=i.Wp.sheet_to_json(l,{header:1}),r=n[0];t(n.slice(1).map(e=>{let t={};return r.forEach((a,s)=>{t[a]=e[s]}),{...t,status:"Pending",summary:""}}))}else console.error("Unsupported file type:",e.type),t([])},"text/csv"===e.type?a.readAsText(e):a.readAsBinaryString(e)}),y=async e=>{let t=e.filter(e=>!a.some(t=>t.file.name===e.name&&t.file.size===e.size)||(console.warn("Skipping duplicate file: ".concat(e.name)),!1));if(0===t.length){console.warn("No new files to upload (all files are duplicates).");return}let s=await Promise.all(t.map(async e=>{let t=await g(e);return{file:e,status:"Pending",summary:"",tableData:t}}));n(e=>[...e,...s]),m(t[0]),p(s[0].tableData)},v=async e=>{let t=a.find(t=>t.file.name===e.name);if(t&&"Pending"===t.status){u(!0),n(t=>t.map(t=>t.file.name===e.name?{...t,status:"In Progress"}:t));for(let a=0;a<t.tableData.length;a++){let s=t.tableData[a];if("Done"===s.status)continue;D(a,"In Progress");let l=await j(s,a,e);l&&(D(a,"Done"),N(a,l),n(t=>t.map(t=>t.file.name===e.name?{...t,tableData:t.tableData.map((e,t)=>t===a?{...e,status:"Done",summary:l}:e)}:t)))}n(t=>t.map(t=>t.file.name===e.name?{...t,status:"Done"}:t)),u(!1)}},j=async(e,t,a)=>{try{let a=await fetch("".concat("http://localhost:8000","/generate-summary"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=a.body.getReader(),l=new TextDecoder,n="",r="";for(;;){let{done:e,value:a}=await s.read();if(e)break;let i=l.decode(a,{stream:!0});if(i.includes("summary:")){let e=i.replace("summary:","").trim();n+=e+" ",N(t,n)}else if(i.includes("classification:")){let e=i.replace("classification:","").trim();r+=e+" ",w(t,r)}}D(t,"Done")}catch(e){console.error("Error streaming summary:",e),D(t,"Error!"),N(t,""),w(t,""),n(e=>e.map(e=>e.file.name===a.name?{...e,tableData:e.tableData.map((e,a)=>a===t?{...e,status:"Error!",summary:"",classification:""}:e)}:e))}},w=(e,t)=>{p(a=>a.map((a,s)=>s===e?{...a,classification:t}:a)),n(a=>a.map(a=>a.file.name===o.name?{...a,tableData:a.tableData.map((a,s)=>s===e?{...a,classification:t}:a)}:a))},N=(e,t)=>{p(a=>a.map((a,s)=>s===e?{...a,summary:t}:a)),n(a=>a.map(a=>a.file.name===o.name?{...a,tableData:a.tableData.map((a,s)=>s===e?{...a,summary:t}:a)}:a))},D=(e,t)=>{p(a=>a.map((a,s)=>s===e?{...a,status:t}:a)),n(a=>a.map(a=>a.file.name===o.name?{...a,tableData:a.tableData.map((a,s)=>s===e?{...a,status:t}:a)}:a))};return(0,s.jsx)(c.Provider,{value:{data:a,setData:n,selectedFile:o,setSelectedFile:m,tableData:d,setTableData:p,handleFileUpload:y,startStreaming:v,updateRowSummary:N,updateRowStatus:D,updateSummaryInGlobalState:(e,t,a)=>{n(s=>s.map(s=>s.file.name===e.name?{...s,status:"Pending",tableData:s.tableData.map((e,s)=>s===t?{...e,summary:a,status:"Pending"}:e)}:s))},proccesingState:x,setProccesingState:u,files:h,setFiles:f,handleFileChange:e=>{let t=Array.from(e.target.files).filter(e=>b.includes(e.type));t.length>0&&(f(e=>[...e,...t]),y(t))},handleFileSelect:e=>{m(e);let t=a.find(t=>t.file.name===e.name);t&&p(t.tableData)},handleDrop:e=>{e.preventDefault();let t=Array.from(e.dataTransfer.files).filter(e=>b.includes(e.type));t.length>0&&(f(e=>[...e,...t]),n(e=>[...e,...t]))},handleRemoveFile:e=>{if(n(t=>t.filter(t=>t.file.name!==e.name)),f(t=>t.filter(t=>t.name!==e.name)),(null==o?void 0:o.name)===e.name){let t=a.filter(t=>t.file.name!==e.name);t.length>0?(m(t[0].file),p(t[0].tableData)):(m(null),p([]))}}},children:t})},m=()=>(0,l.useContext)(c)}},e=>{var t=t=>e(e.s=t);e.O(0,[830,711,524,217,900,441,684,358],()=>t(208)),_N_E=e.O()}]);